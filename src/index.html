<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Rodin</title>

    <link rel="shortcut icon" href="/images/favicon/favicon.ico" type="image/x-icon"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/images/favicon/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicon/manifest.json">
    <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#000000">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="/styles/style.css?v=0.0.92">
    <base href="/">

</head>
<body class="page" data-ng-class="::pageClass">

<div data-ui-view class="app-container clearfix"></div>

<div class="clearfix loader" data-loader>
    <div class="container">
        <div class="row clearfix">
            <img src="/images/loader-rodin-logo.png" alt="Rodin APP" class="center-block">
        </div>
        <div class="row clearfix">
            <p class="text-center">Loading...</p>
        </div>
    </div>
</div>

<div class="clearfix hidden rodin-transition-canvas" data-rodin-transition-canvas></div>

<script type="text/javascript" src="/scripts/vendor/systemjs/dist/system.js"></script>
<script type="text/javascript" src="https://cdn.rodin.io/v0.0.7-dev/vendor/vendor.js"></script>
<script>

    window.SCENE_MANAGER_AUTO_CREATE = false;
    function getQueryVariable(variable) {
        let query = window.location.search.substring(1);
        let vars = query.split('&');
        for (let i = 0; i < vars.length; i++) {
            let pair = vars[i].split('=');
            if (decodeURIComponent(pair[0]) == variable) {
                return decodeURIComponent(pair[1]);
            }
        }

        return 'desktop';
    }
    window.device = getQueryVariable('device');
    window.showBackButtonOnProjectPage = getQueryVariable('backbutton');

    (function (System) {
        var systemnormalize = System.normalize;
        var blacklist = ['systemjs-json'];

        function shouldReverse(parts) {
            return parts.every(function (part) {
                return blacklist.indexOf(part) === -1;
            });
        }

        System.normalize = function (name, parentName) {
            var parts = name.split('!');

            if (parts.length > 1 && shouldReverse(parts)) {
                name = parts.reverse().join('!');
            }

            return systemnormalize.call(this, name, parentName);
        };
    })(System);

    var systemLocate = System.locate;
    System.locate = function (load) {
        var System = this;
        return Promise.resolve(systemLocate.call(this, load)).then(function (address) {
            return address + System.cacheBust;
        });
    };
    System.cacheBust = '?v=0.0.93';


    System.config({
        map: {
            css: '/scripts/vendor/systemjs-module/css.js',
            'rodin/core': 'npm:core',
        },
        meta: {
            '*': {authorization: true}
        },
        paths: {
            '*': 'scripts/vendor/*',
            'app/*': 'app/*',
            'app3d/*': 'app3d/*',
            'scripts/*': 'scripts/*',
            'npm:': 'https://cdn.rodin.io/v0.0.7-dev/',
        },
        packages: {
            'dist': {main: 'index.js', defaultExtension: 'js'},
            'rodin/core': {main: 'index.js', defaultExtension: 'js'},
            "/scripts": {  // path to your project root
                "defaultJSExtensions": true,
                meta: {
                    '*.css': {loader: 'css'}
                }
            },
            "/": {  // path to your project root
                "defaultJSExtensions": true
            },
            'npm:core/error': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/time': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/scene': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/sculpt': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/sculpt/elements': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/messenger': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/eventEmitter': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/set': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/initializer': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/constants': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/rodinEvent': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/raycaster': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/controllers': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/animation': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/video': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/button': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/gamePad': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/utils': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/loader': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/plugin': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/particleSystem': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/color': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/camera': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/avatar': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/math': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/grid': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/transport': {main: 'index.js', defaultExtension: 'js'},
            'npm:core/device': {main: 'index.js', defaultExtension: 'js'},
        }
    });

    System.import('app/app.js');

</script>

</body>
</html>